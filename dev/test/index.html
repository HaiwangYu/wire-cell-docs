<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Testing - Wire Cell Documentation</title>
  

  <link rel="shortcut icon" href="../../img/favicon.ico">

  
  <link href='https://fonts.googleapis.com/css?family=Lato:400,700|Roboto+Slab:400,700|Inconsolata:400,700' rel='stylesheet' type='text/css'>

  <link rel="stylesheet" href="../../css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../../css/theme_extra.css" type="text/css" />
  <link rel="stylesheet" href="../../css/highlight.css">

  
  <script>
    // Current page data
    var mkdocs_page_name = "Testing";
  </script>
  
  <script src="../../js/jquery-2.1.1.min.js"></script>
  <script src="../../js/modernizr-2.8.3.min.js"></script>
  <script type="text/javascript" src="../../js/highlight.pack.js"></script>
  <script src="../../js/theme.js"></script> 

  
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
      <div class="wy-side-nav-search">
        <a href="../.." class="icon icon-home"> Wire Cell Documentation</a>
        <div role="search">
  <form id ="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
        <ul class="current">
          
            <li>
    <li class="toctree-l1 ">
        <a class="" href="../..">Overview</a>
        
    </li>
<li>
          
            <li>
    <ul class="subnav">
    <li><span>Installation</span></li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../install/install/">Install Wire Cell</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../install/external/">Install Externals</a>
        
    </li>

        
    </ul>
<li>
          
            <li>
    <ul class="subnav">
    <li><span>Developer</span></li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../overview/">Overview</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../dev/">Building</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../iface/">Interfaces</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../data/">Persistency</a>
        
    </li>

        
            
    <li class="toctree-l1 current">
        <a class="current" href="./">Testing</a>
        
            <ul>
            
                <li class="toctree-l3"><a href="#tests">Tests</a></li>
                
                    <li><a class="toctree-l4" href="#c-tests">C++ tests</a></li>
                
            
            </ul>
        
    </li>

        
    </ul>
<li>
          
            <li>
    <ul class="subnav">
    <li><span>Algorithms</span></li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../alg/cell/">Making Cells</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../alg/blob/">Blob Reconstruction</a>
        
    </li>

        
    </ul>
<li>
          
            <li>
    <ul class="subnav">
    <li><span>Visualization</span></li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../viz/webgl/">WebGL</a>
        
    </li>

        
    </ul>
<li>
          
            <li>
    <ul class="subnav">
    <li><span>Meta</span></li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../meta/meta/">About</a>
        
    </li>

        
    </ul>
<li>
          
        </ul>
      </div>
      &nbsp;
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="../..">Wire Cell Documentation</a>
      </nav>

      
      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../..">Docs</a> &raquo;</li>
    
      
        
          <li>Developer &raquo;</li>
        
      
    
    <li>Testing</li>
    <li class="wy-breadcrumbs-aside">
      
        
          <a href="https://github.com/WireCell/wire-cell-docs/" class="icon icon-github"> Edit on GitHub</a>
        
      
    </li>
  </ul>
  <hr/>
</div>
          <div role="main">
            <div class="section">
              
                <h1 id="tests">Tests</h1>
<p>Tests go under the <code>test/</code> (or <code>tests/</code>) sub-directory of the package.  There are two types, C++ and Python.  In both cases, only files that begin with "<code>test_*</code>" will be considered tests.  Tests are automatically run as part of the build procedure (fixme: just C++ ones are automatic right now) and will be rerun when they or code they depend on changes.   When tests are run by the build the <code>stdout/stderr</code> is typically captured.  You can run them manually to observe any print statements.  Tests are not installed but left in the "<code>build/</code>" (or sometimes "<code>tmp/</code>") output directory.</p>
<p>Here are a few general guidelines for writing tests:</p>
<ul>
<li>write many tests</li>
<li>write tests as fine grained as convenient</li>
<li>the best tests are written before or while the code they test is being written</li>
<li>test code does need not be "pretty", it will never be called from anywhere else</li>
<li>tests should run quickly</li>
<li>do use contrived data or mocked code to provide a bit of test code it's needed input or code support</li>
</ul>
<h2 id="c-tests">C++ tests</h2>
<p>Writing a C++ test is to write a <code>main()</code> program which takes <strong>no arguments</strong>.  If a test fails, either let it crash the test program or call <code>exit(1)</code>.</p>
<p>You can explicitly run C++ test programs.  When they are run as part of the build, their full path is printed.  When run automatically, waf takes care of setting up their environment so that their libraries are found.  When run manually you will have to assure this.  The simplest way is to <code>waf install</code>" the package first.</p>
<pre><code class="bash">$ waf
...
execution summary
  tests that pass 3/4
    /home/bviren/projects/wire-cell/top/build/data/test_construct
    /home/bviren/projects/wire-cell/top/build/nav/test_geomdatasource
    /home/bviren/projects/wire-cell/top/build/sst/tgeomdatasource
  tests that fail 1/4
    /home/bviren/projects/wire-cell/top/build/data/test_fail
'build' finished successfully

$ waf install

$ /home/bviren/projects/wire-cell/top/build/sst/test_sst_geomdatasource
Wire: 0 plane=1 index=0
Wire: 0 plane=1 index=1
Wire: 0 plane=1 index=2
...
</code></pre>
              
            </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="../../alg/cell/" class="btn btn-neutral float-right" title="Making Cells"/>Next <span class="icon icon-circle-arrow-right"></span></a>
      
      
        <a href="../data/" class="btn btn-neutral" title="Persistency"><span class="icon icon-circle-arrow-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <!-- Copyright etc -->
    
  </div>

  Built with <a href="http://www.mkdocs.org">MkDocs</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.
</footer>
	  
        </div>
      </div>

    </section>

  </div>

<div class="rst-versions" role="note" style="cursor: pointer">
    <span class="rst-current-version" data-toggle="rst-current-version">
      
          <a class="icon icon-github" style="float: left; color: #fcfcfc"> GitHub</a>
      
      
        <span><a href="../data/" style="color: #fcfcfc;">&laquo; Previous</a></span>
      
      
        <span style="margin-left: 15px"><a href="../../alg/cell/" style="color: #fcfcfc">Next &raquo;</a></span>
      
    </span>
</div>

</body>
</html>
